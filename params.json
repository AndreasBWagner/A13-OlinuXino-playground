{"name":"A13-olinuxino-playground","tagline":"Playing around  with the A13-OlinuXino-MICRO","body":"= 13-OlinuXino-MICRO info =\r\n\r\nI recently purchased a 13-OlinuXino-MICRO. The goal is to port MINIX to that board. I therefore am gattering some information here.\r\nDocument\r\n\r\nDatasheets:\r\n-User manual: http://dl.linux-sunxi.org/A13/A13%20User%20Manual%20-%20v1.2%20(2013-01-08).pdf\r\n\r\nLinks:\r\n\r\n* link:git://github.com/OLIMEX/OLINUXINO.git[OLIMEX git repo] Schematics and some software (including script.bin )\r\n* link:https://github.com/linux-sunxi/linux-sunxi.git[sunxi Linux Kernel]\r\n* link:https://github.com/linux-sunxi/u-boot-sunxi.git[u-boot]\r\n* link:git://github.com/linux-sunxi/sunxi-tools.git[sunxi tools]\r\n* link:git://github.com/tsgan/allwinner_a10.git[FreeBSD port to the a10]\r\n\r\n\r\n== Serial and serial cable ==\r\nIf you have the link:https://www.olimex.com/Products/Components/Cables/USB-Serial-Cable/USB-Serial-Cable-F/[Olimex USB-SERIAL-CABLE] GND=BLUE, RX(INPUT)=GREEN, TX(OUTPUT)=RED you can connect it the following way:\r\n\r\nimage::img/photo_serial_small.jpg[photo of connecting the Serial to the 13-OlinuXino-MICRO]\r\nimage::img/A13-OLinuXino-MICRO_serial_sch.png[schematics for the serial]\r\n\r\nAs usual with serial you need to connect the sending end of the serial to the receiving end of the board.\r\n\r\n== Formating the SD-card ==\r\n\r\nThe device doesn't have internal storage and boots from the SD-card. The second and third stage loader (SPL and U-Boot) are loaded from the start of the MMC (not on a file system). The default configuration is to create two partitions the first is a FAT formatted one where u-boot will load files from and the second one probably a ext2 partition. But given the bootloaders are not on the FAT you need to reserve some space at the start (I leave 2048 512 byte blokcs at the start as this is the default fdisk offers).\r\n\r\nThe layout looks something like this:\r\n|=====\r\n| *NAME*           |  start block | size\r\n| MBR           |  0 | 1 block\r\n| sunxi-spl.bin | 16 | 20K\r\n| u-boot.bin    | 64 | 170K\r\n| FAT           | 2048 | 20M\r\n| EXT2          | --- | Rest\r\n|=====\r\n\r\nfisk -l on your device might look like this:\r\n---------------------------------\r\n    Device Boot      Start         End      Blocks   Id  System\r\n /dev/sdc1            2048       43007       20480    b  W95 FAT32\r\n /dev/sdc2           43008      990975      473984   83  Linux\r\n---------------------------------\r\n\r\n\r\n== Uboot and booting ==\r\n\r\n------------------------\r\n git clone https://github.com/linux-sunxi/u-boot-sunxi.git\r\n cd u-boot-sunxi\r\n make a13_olinuxino CROSS_COMPILE=arm-none-eabi-\r\n DEV=/dev/sdXFixMe\r\n sudo dd if=spl/sunxi-spl.bin of=$DEV bs=1024 seek=8\r\n sudo dd if=u-boot.bin of=$DEV bs=1024 seek=32\r\n------------------------\r\n\r\nAfther this the device will boot and if you have a serial attached you can see the u-boot command prompt\r\n\r\n\r\n== Kernel and script.bin ==\r\n\r\nscript.bin is file used by the sunxi kernel and contains configuration parameters like port GPIO assignments. This file file is created using the fex2bin tool  that can be found in the sunxi-tools git repo. You can convert the bin file into something more readable using bin2fex. If you run that you get link:src/script.bin.fex[Ascii version of script.bin].\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}