<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>A13-olinuxino-playground by keesj</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>A13-olinuxino-playground</h1>
        <p>Playing around  with the A13-OlinuXino-MICRO</p>

        <p class="view"><a href="https://github.com/keesj/A13-OlinuXino-playground">View the Project on GitHub <small>keesj/A13-OlinuXino-playground</small></a></p>


        <ul>
          <li><a href="https://github.com/keesj/A13-OlinuXino-playground/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/keesj/A13-OlinuXino-playground/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/keesj/A13-OlinuXino-playground">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <p>= 13-OlinuXino-MICRO info =</p>

<p>I recently purchased a 13-OlinuXino-MICRO. The goal is to port MINIX to that board. I therefore am gattering some information here.
Document</p>

<p>Datasheets:
-User manual: <a href="http://dl.linux-sunxi.org/A13/A13%20User%20Manual%20-%20v1.2%20(2013-01-08).pdf">http://dl.linux-sunxi.org/A13/A13%20User%20Manual%20-%20v1.2%20(2013-01-08).pdf</a></p>

<p>Links:</p>

<ul>
<li>link:git://github.com/OLIMEX/OLINUXINO.git[OLIMEX git repo] Schematics and some software (including script.bin )</li>
<li>link:<a href="https://github.com/linux-sunxi/linux-sunxi.git%5Bsunxi">https://github.com/linux-sunxi/linux-sunxi.git[sunxi</a> Linux Kernel]</li>
<li>link:<a href="https://github.com/linux-sunxi/u-boot-sunxi.git%5Bu-boot%5D">https://github.com/linux-sunxi/u-boot-sunxi.git[u-boot]</a>
</li>
<li>link:git://github.com/linux-sunxi/sunxi-tools.git[sunxi tools]</li>
<li>link:git://github.com/tsgan/allwinner_a10.git[FreeBSD port to the a10]</li>
</ul><p>== Serial and serial cable ==
If you have the link:<a href="https://www.olimex.com/Products/Components/Cables/USB-Serial-Cable/USB-Serial-Cable-F/%5BOlimex">https://www.olimex.com/Products/Components/Cables/USB-Serial-Cable/USB-Serial-Cable-F/[Olimex</a> USB-SERIAL-CABLE] GND=BLUE, RX(INPUT)=GREEN, TX(OUTPUT)=RED you can connect it the following way:</p>

<p>image::img/photo_serial_small.jpg[photo of connecting the Serial to the 13-OlinuXino-MICRO]
image::img/A13-OLinuXino-MICRO_serial_sch.png[schematics for the serial]</p>

<p>As usual with serial you need to connect the sending end of the serial to the receiving end of the board.</p>

<p>== Formating the SD-card ==</p>

<p>The device doesn't have internal storage and boots from the SD-card. The second and third stage loader (SPL and U-Boot) are loaded from the start of the MMC (not on a file system). The default configuration is to create two partitions the first is a FAT formatted one where u-boot will load files from and the second one probably a ext2 partition. But given the bootloaders are not on the FAT you need to reserve some space at the start (I leave 2048 512 byte blokcs at the start as this is the default fdisk offers).</p>

<p>The layout looks something like this:
|=====
| <em>NAME</em>           |  start block | size
| MBR           |  0 | 1 block
| sunxi-spl.bin | 16 | 20K
| u-boot.bin    | 64 | 170K
| FAT           | 2048 | 20M
| EXT2          | --- | Rest
|=====</p>

<h2>fisk -l on your device might look like this:</h2>

<pre><code>Device Boot      Start         End      Blocks   Id  System
</code></pre>

<p>/dev/sdc1            2048       43007       20480    b  W95 FAT32</p>

<h2> /dev/sdc2           43008      990975      473984   83  Linux</h2>

<p>== Uboot and booting ==</p>

<hr><p>git clone <a href="https://github.com/linux-sunxi/u-boot-sunxi.git">https://github.com/linux-sunxi/u-boot-sunxi.git</a>
 cd u-boot-sunxi
 make a13_olinuxino CROSS_COMPILE=arm-none-eabi-
 DEV=/dev/sdXFixMe
 sudo dd if=spl/sunxi-spl.bin of=$DEV bs=1024 seek=8</p>

<h2> sudo dd if=u-boot.bin of=$DEV bs=1024 seek=32</h2>

<p>Afther this the device will boot and if you have a serial attached you can see the u-boot command prompt</p>

<p>== Kernel and script.bin ==</p>

<p>script.bin is file used by the sunxi kernel and contains configuration parameters like port GPIO assignments. This file file is created using the fex2bin tool  that can be found in the sunxi-tools git repo. You can convert the bin file into something more readable using bin2fex. If you run that you get link:src/script.bin.fex[Ascii version of script.bin].</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/keesj">keesj</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>